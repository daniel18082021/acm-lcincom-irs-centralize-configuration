databaseChangeLog:
  - changeSet:
        id: '2020Jan13-120000-insertTransactionConfirmConfiguration'
        author: quynh_nguyenthuy_vn
        dbms: 'postgresql'
        rollback:
            - sql:
                sql:
                - DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key = 'spring.liquibase.change-log';
                  DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key = 'spring.liquibase.enabled';
                  DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key = 'service-endpoint.partner-management';
                  DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key = 'service-endpoint.router';
                  DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key = 'service-endpoint.translator';
                  DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key = 'service-endpoint.local-spi-engine';
                  DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key = 'service-endpoint.global-spi-engine';
        changes:
          - sql:
              sql:
                - INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'spring.liquibase.change-log', 'classpath:/db/changelog/db.changelog-master.yml');
                  INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'spring.liquibase.enabled', 'true');
                  INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'service-endpoint.partner-management', '${ds}{services.service-endpoint.partner-management}');
                  INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'service-endpoint.router', '${ds}{services.service-endpoint.router}');
                  INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'service-endpoint.translator', '${ds}{services.service-endpoint.translator}');
                  INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'service-endpoint.local-spi-engine', '${ds}{services.service-endpoint.local-spi-engine}');
                  INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'service-endpoint.global-spi-engine', '${ds}{services.service-endpoint.global-spi-engine}');
  - changeSet:
      id: '2020Jan13-120001-insertTransactionConfirmSpringCloudConfiguration'
      author: khanh_nguyen_vn
      dbms: 'postgresql'
      rollback:
          - sql:
              sql:
              - DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key like 'spring.cloud.stream.bindings.transaction-confirm-request.destination';
                DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key like 'spring.cloud.stream.bindings.transaction-confirm-request.contentType';
                DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key like 'spring.cloud.stream.bindings.transaction-confirm-request.group';
                DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key like 'spring.cloud.stream.bindings.transaction-confirm-response.destination';
                DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key like 'spring.cloud.stream.bindings.transaction-confirm-response.contentType';
                DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key like 'spring.cloud.stream.bindings.transaction-confirm-response.group';
      changes:
        - sql:
            sql:
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'spring.cloud.stream.bindings.transaction-confirm-request.destination', 'transactionConfirmRequest');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'spring.cloud.stream.bindings.transaction-confirm-request.contentType', 'application/json');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'spring.cloud.stream.bindings.transaction-confirm-request.group', 'confirmGroupRequest');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'spring.cloud.stream.bindings.transaction-confirm-response.destination', 'transactionConfirmRequest');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'spring.cloud.stream.bindings.transaction-confirm-response.contentType', 'application/json');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'spring.cloud.stream.bindings.transaction-confirm-response.group', 'confirmGroupResponse');
  - changeSet:
      id: '2020Jan13-12000-insertTransactionConfirmDatabaseConfiguration'
      author: khanh_nguyen_vn
      dbms: 'postgresql'
      validCheckSum: ANY
      rollback:
        - sql:
            sql:
              - DELETE FROM orbitmaster.configuration WHERE application = 'transaction-confirmation' and 'profile' = 'default' and label = 'default' and key = 'spring.datasource.url';
      changes:
        - sql:
            sql:
              - INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('transaction-confirmation', 'default', 'default', 'spring.datasource.url', '${transaction-confirmation-db-url}');
