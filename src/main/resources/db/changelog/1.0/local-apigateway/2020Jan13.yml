databaseChangeLog:
  - changeSet:
      id: '13Jan2020-1200000-insertLocalapi-gatewayConfiguration'
      author: khanh_nguyen_vn
      dbms: 'postgresql'
      rollback:
        - sql:
            sql:
              DELETE FROM orbitmaster.configuration WHERE application = 'local-api-gateway' and 'profile' = 'default' and label = 'default' and key = 'server.error.path';
              DELETE FROM orbitmaster.configuration WHERE application = 'local-api-gateway' and 'profile' = 'default' and label = 'default' and key = 'zuul.host.socket-timeout-millis';
              DELETE FROM orbitmaster.configuration WHERE application = 'local-api-gateway' and 'profile' = 'default' and label = 'default' and key = 'zuul.ignored-headers';
              DELETE FROM orbitmaster.configuration WHERE application = 'local-api-gateway' and 'profile' = 'default' and label = 'default' and key = 'zuul.ignored-patterns';
              DELETE FROM orbitmaster.configuration WHERE application = 'local-api-gateway' and 'profile' = 'default' and label = 'default' and key = 'zuul.ignored-services';
              DELETE FROM orbitmaster.configuration WHERE application = 'local-api-gateway' and 'profile' = 'default' and label = 'default' and key = 'zuul.routes.transaction.path';
              DELETE FROM orbitmaster.configuration WHERE application = 'local-api-gateway' and 'profile' = 'default' and label = 'default' and key = 'zuul.routes.transaction.url';
              DELETE FROM orbitmaster.configuration WHERE application = 'local-api-gateway' and 'profile' = 'default' and label = 'default' and key = 'zuul.routes.transaction.stripPrefix';
      changes:
        - sql:
            sql:
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('local-api-gateway', 'default', 'default', 'server.error.path', '/error');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('local-api-gateway', 'default', 'default', 'zuul.host.socket-timeout-millis', '420000');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('local-api-gateway', 'default', 'default', 'zuul.ignored-headers', 'Access-Control-Allow-Credentials, Access-Control-Allow-Origin, Vary');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('local-api-gateway', 'default', 'default', 'zuul.ignored-patterns', '/prometheus, /info, /health, /error, /actuator/**');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('local-api-gateway', 'default', 'default', 'zuul.ignored-services', '*');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('local-api-gateway', 'default', 'default', 'zuul.routes.transaction.path', '/transaction-confirmation/**');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('local-api-gateway', 'default', 'default', 'zuul.routes.transaction.url', '${ds}{services.service-endpoint.transaction-confirmation}/local');
              INSERT INTO orbitmaster.configuration(application, profile, label, key, value) VALUES ('local-api-gateway', 'default', 'default', 'zuul.routes.transaction.stripPrefix', 'true');
